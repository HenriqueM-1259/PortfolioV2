<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
</head>
<body>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
    </style>
    <canvas id="Canvas"></canvas>
   
</body>
<script>
    window.addEventListener('load', () => {
        var service = new Service(document.getElementById('Canvas'));
            
            function LoopService() {
              service.Draw()
              service.Update()
              requestAnimationFrame(LoopService);
            }

            LoopService();
    })

    class Service{
        constructor(Canvas){
            this.canvas = Canvas
            this.contexto = this.canvas.getContext('2d')
            this._config = this.loadConfig();
            this.FontFamily ={
                Name:"Montserrat",
                URL:"Montserrat-Regular.ttf"
            }
            this.posicaoTextOne = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 400)
            }
            this.posicaoTextTwo = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 360)
            }
            this.posicaoTextThree = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 330)
            }
            this.posicaoTextFour = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 305)
            }
            this.posicaoTextFive = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 280)
            }
            this.posicaoPlayer = {
                x:  (this.canvas.width - 630),
                y:  (this.canvas.height - 280)
            }
            this.textoOne = new Texto(this.contexto,this.posicaoTextOne,"30px montserrat","Full stack web developer ", this.FontFamily);
            this.textoTwo = new Texto(this.contexto,this.posicaoTextTwo,"26px montserrat","OlÃ¡, eu sou um desenvolvedor Full Stack.");
            this.textoThree = new Texto(this.contexto,this.posicaoTextThree,"22px montserrat","Desenvolvimento:  HTML | CSS | JavaScript ~ JQuery | ");
            this.textoFour = new Texto(this.contexto,this.posicaoTextFour,"22px montserrat","C# .NET | ASP Classic | GitLab | SQL ServerEdition | ");
            this.textoFive = new Texto(this.contexto,this.posicaoTextFive,"22px montserrat","C# ASP.NET MVC ");
            this.Player = new Player(this.contexto,this.posicaoPlayer)
        }
        
        LimpaTela(){
            this.contexto.clearRect(0,0,this.canvas.width,this.canvas.height)
        }
        Draw(){
            this.LimpaTela()
            this.backGroundTela()
            this.textoOne.Draw()
            this.textoTwo.Draw()
            this.textoThree.Draw()
            this.textoFour.Draw()
            this.textoFive.Draw()
            this.Player.Draw()
        }
        Update(){
            this.textoOne.Update()
            this.textoTwo.Update()
            this.textoThree.Update()
            this.textoFour.Update()
            this.textoFive.Update()
        }
        backGroundTela(){
           this.contexto.fillStyle = '#121212'
           this.contexto.fillRect(0,0,this.canvas.width,this.canvas.height)
        }
        loadConfig(){
        console.log("Service iniciado e configuracao carregada")
           this.canvas.width = window.innerWidth
           this.canvas.height = window.innerHeight
           
        }
    }

    class Texto {
        constructor(contexto, posicao,font,texto,Familyfont){
            this.contexto = contexto;
            this.posicao = posicao;
            this.font = font;
            this.texto = texto;
            this.FontFamily = Familyfont == undefined ? null: this.setFontFamily(Familyfont)
        }
       
        Draw(){
            this.contexto.fillStyle = 'white'
            this.contexto.font = this.font
            this.contexto.fillText(this.texto, this.posicao.x,this.posicao.y)
          
        }
        Update(){
            //this.posicao.x++
        }
        setFontFamily(Familyfont){
            
            const FontFamily = new FontFace(Familyfont.Name, 'url('+Familyfont.URL+')');
            FontFamily.load().then((font) => {
       
            document.fonts.add(font);

             }).catch((error) => {
            console.error('Erro ao carregar a fonte'+Familyfont.Name+': ', error);
            });

        }
    }
    class Player{
        constructor(contexto,posicao){
            this.contexto = contexto
            this.posicao = posicao
            this.Tamanho = {
                x:25,
                y:25
            }
            document.addEventListener('keydown', this.handleKeyDown.bind(this));
        
            
        }

        Draw(){
            
           this.contexto.fillStyle = 'red'
           this.contexto.fillRect(this.posicao.x,this.posicao.y,this.Tamanho.x,this.Tamanho.y)
        }
        Update(){

        }

        handleKeyDown(event) {
            const key = event.key.toLowerCase();
        switch (key) {
        case 'w':
            this.moveUp();
            break;
        case 'a':
            this.moveLeft();
            break;
        case 's':
            this.moveDown();
            break;
        case 'd':
            this.moveRight();
            break;
        }
    }
            moveUp() {
            this.posicao.y -= 10;
            console.log('Move up:', this.x, this.y);
            }

            moveLeft() {
                this.posicao.x -= 10;
                console.log('Move left:', this.x, this.y);
            }

            moveDown() {
                this.posicao.y += 10;
                console.log('Move down:', this.x, this.y);
            }

            moveRight() {
                this.posicao.x += 10;
                console.log('Move right:', this.x, this.y);
            }

    }
</script>
</html>

